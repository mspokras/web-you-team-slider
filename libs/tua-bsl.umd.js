/*! For license information please see tua-bsl.umd.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).bodyScrollLock={})}(this,(function(e){"use strict";var t=function(){return"undefined"==typeof window},o=function(e){e=e||navigator.userAgent;var t=/(iPad).*OS\s([\d_]+)/.test(e);return{ios:!t&&/(iPhone\sOS)\s([\d_]+)/.test(e)||t,android:/(Android);?[\s/]+([\d.]+)?/.test(e)}},n=0,i=0,r=0,c=null,s=!1,l=[],u=function(e){if(t())return!1;if(!e)throw new Error("options must be provided");var o=!1,n={get passive(){o=!0}},i=function(){},r="__TUA_BSL_TEST_PASSIVE__";window.addEventListener(r,i,n),window.removeEventListener(r,i,n);var c=e.capture;return o?e:void 0!==c&&c}({passive:!1}),d=!t()&&"scrollBehavior"in document.documentElement.style,a=function(e){e.cancelable&&e.preventDefault()},f=function(e){e||null!==e&&console.warn("If scrolling is also required in the floating layer, the target element must be provided.")};e.clearBodyLocks=function(){if(!t())if(n=0,o().ios||"function"!=typeof c){if(l.length)for(var e=l.pop();e;)e.ontouchmove=null,e.ontouchstart=null,e=l.pop();s&&(document.removeEventListener("touchmove",a,u),s=!1)}else c()},e.lock=function(e){var h,v,p,y,g;t()||(f(e),o().ios?(e&&(Array.isArray(e)?e:[e]).forEach((function(e){e&&-1===l.indexOf(e)&&(e.ontouchstart=function(e){i=e.targetTouches[0].clientY,r=e.targetTouches[0].clientX},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){if(t){var o=t.scrollTop,n=t.scrollLeft,c=t.scrollWidth,s=t.scrollHeight,l=t.clientWidth,u=t.clientHeight,d=e.targetTouches[0].clientX-r,f=e.targetTouches[0].clientY-i,h=Math.abs(f)>Math.abs(d),v=f>0&&0===o,p=d>0&&0===n,y=d<0&&n+l+1>=c,g=f<0&&o+u+1>=s;if("INPUT"!==e.target.tagName&&(h&&(v||g)||!h&&(p||y)))return a(e)}e.stopPropagation()}(t,e)},l.push(e))})),s||(document.addEventListener("touchmove",a,u),s=!0)):n<=0&&(c=o().android?(h=document.documentElement,v=document.body,p=h.scrollTop||v.scrollTop,y=Object.assign({},h.style),g=Object.assign({},v.style),h.style.height="100%",h.style.overflow="hidden",v.style.top="-".concat(p,"px"),v.style.width="100%",v.style.height="auto",v.style.position="fixed",v.style.overflow="hidden",function(){h.style.height=y.height||"",h.style.overflow=y.overflow||"",["top","width","height","overflow","position"].forEach((function(e){v.style[e]=g[e]||""})),d?window.scrollTo({top:p,behavior:"instant"}):window.scrollTo(0,p)}):function(){var e=document.body,t=Object.assign({},e.style),o=window.innerWidth-e.clientWidth;return e.style.overflow="hidden",e.style.boxSizing="border-box",e.style.paddingRight="".concat(o,"px"),function(){["overflow","boxSizing","paddingRight"].forEach((function(o){e.style[o]=t[o]||""}))}}()),n+=1)},e.unlock=function(e){t()||(f(e),(n-=1)>0)||(o().ios||"function"!=typeof c?(e&&(Array.isArray(e)?e:[e]).forEach((function(e){var t=l.indexOf(e);-1!==t&&(e.ontouchmove=null,e.ontouchstart=null,l.splice(t,1))})),s&&(document.removeEventListener("touchmove",a,u),s=!1)):c())},Object.defineProperty(e,"__esModule",{value:!0})}));