!function(){"use strict";!function(){function e(e){return"string"==typeof e}function t(t){return e(t)&&t.length>0}function s(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s]}function r(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s]}class n extends Error{constructor(){super("Main scope variable is busy")}}class a extends Error{constructor(e){let{name:t}=e;super(`Module Is Not Ready To Use: ${t}`)}}class i{constructor(){this.__subscribers={}}on(e,t){e in this.__subscribers||(this.__subscribers[e]=[]),this.__subscribers[e].push(t)}off(e,t){e in this.__subscribers&&(this.__subscribers[e]=this.__subscribers[e].filter((e=>e===t)))}emit(e,t){e in this.__subscribers&&this.__subscribers[e].forEach((e=>e(t)))}}const o={__app__:!0,context:{},registered:new Map,ready:new Map,dependencies:{}};class c extends i{constructor(e){super(),s(`Construct module > props: ${JSON.stringify(e)}`,` Module: ${JSON.stringify(this)};`),this.state={registered:!1,ready:!1},Object.assign(this,e);const{name:t,entry:r,required:n,cleanup:a}=e}get ready(){return this.state.ready}set ready(e){this.state.ready=e,this.emit("ready",this)}get registered(){return this.state.registered}set registered(e){this.state.registered=e}init(e){if(s(`Init module > context: ${e}`,` Module: ${this};`),!this.registered)return r("Module is unregistered");this.context=this.entry(e),this.ready=!0}detouch(){if(s("Detouch module;",` Module: ${this};`),!this.registered)return r("Module is unregistered");this.ready&&(this.ready=!1,this.cleanup()),this.registered=!1}}var d=new class extends i{constructor(){if(super(),void 0!==window.__app__){if(window.__app__.__app__)return window.__app__;throw new n}Object.assign(this,o),window.__app__=this}isReady(t){return e(t)?this.ready.has(t):t.every((e=>this.ready.has(e)))}isRegistered(t){return e(t)?this.registered.has(t):t.every((e=>this.registered.has(e)))}setAsReady(e){this.context[e.name]=e.context,this.ready.set(e.name,e),this.emit("ready",e)}setAsRegistered(e){this.registered.set(e.name,e)}addDependencies(t,s){const r=e=>{e in this.dependencies?this.dependencies[e].add(t):this.dependencies[e]=new Set(t)};return e(s)?r(s):s.forEach((e=>r(e)))}removeDependencies(t,s){const r=e=>{e in this.dependencies&&this.dependencies[e].remove(t)};return e(s)?r(s):s.forEach((e=>r(e)))}hasReferences(e){return this.getReferences(e)?.size}getReferences(e){return this.dependencies[e]}get(e){return this.registered.get(e)}use(e){if(!this.isReady(e))throw new a(module);return this.context[e]}add(e){if(this.isRegistered(e.name))return r(`The module is already registered: ${e.name}`);e.on("ready",(()=>this.setAsReady(e))),e.required&&this.addDependencies(e.name,e.required),e.on("beforeDetouch",(()=>this.setAsReady(e))),e.registered=!0,this.setAsRegistered(e),!e.required||this.isReady(e.required)?e.init(this.context):this.on("ready",(t=>{let{name:s}=t;isReady(e.required)&&e.init(this.context)}))}detouch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(hasReferences(e)&&!t)return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];console.error(...t)}(`Module can't be detouched. There are references to this module: ${Array.from(this.getReferences(e)).join(", ")}`);get(e)?.detouch()}};class l extends i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.prevState={},this.state=e}update(e){this.prevState=this.state,this.state=e(this.state),this.emit("update",{state:this.state,prevState:this.prevState})}}const u={departments:{status:"idle",data:[]},selectedEmployeeIdx:null,selectedDepartmentId:null,employees:{status:"idle",data:[]}};const p="https://team.web-you.pl/",h=`${p}/wp-json/wp/v2`,m=`${p}/wp-json/custom/v1`;class f extends Error{constructor(e,t){super(t||"Bad response (not ok)"),this.response=e}}function g(e){if(!e.ok)throw new f(e)}class _{constructor(e){this.duration=e,this.timer=null}unset(){clearInterval(this.timer),this.timer=null}set(e){this.active&&this.unset(),this.counter=this.duration,this.timer=setInterval((()=>{const t=1===this.counter;e&&e(this.counter,t),t?this.unset():this.counter--}),1e3)}get active(){return null!==this.timer}}function y(e,t,s){const r=new _(5),n=$(`#${e} [data-msg-disclosure='data-not-sent']`),a=$(`#${e} [data-msg-disclosure='data-successfully-sent']`),i=$(`#${e} .contact-form__send-btn`),o=$(`#${e} .contact-form__call-btn`),c=$(`#${e}`);o.on("click",(e=>{(function(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];console.log("reduceIterator");do{t=e.next(),s.push(t.value)}while(!t.done);return s})(new FormData(c.get(0)).values()).some((e=>void 0!==e&&e.length>0))&&n.addClass("open")})),c.validate({ignore:[],highlight:function(e,t,s){$(e).closest(".form-field").addClass(t)},unhighlight:function(e,t,s){$(e).closest(".form-field").removeClass(t)},errorPlacement:function(e,t){e.appendTo(t.closest(".form-input"))},submitHandler:async function(s,d){if(d.preventDefault(),r.active)return!1;r.set(((e,t)=>{t&&(i.removeClass("disabled"),o.removeClass("disabled"))})),i.addClass("disabled"),o.addClass("disabled");const l=new FormData(s);if("cv-request-contact-form"==e){const{selectedEmployeeIdx:e,employees:s}=t.state;e>-1&&s.data.length&&(l.append("employee-id",s.data[e].id),l.append("employee-name",s.data[e].crb_person_name))}!async function(e){const t=await fetch(`${m}/contact-request/`,{method:"POST",body:e});g(t),t.json()}(l),c.get(0).reset(),n.removeClass("open"),a.addClass("open"),setTimeout((()=>{a.removeClass("open")}),5e3)}})}async function b(e){d.use("pageStore");try{const t=await fetch(`${h}/categories?${e}`,{method:"GET"});return g(t),t.json()}catch(e){console.error("Error while fetching categories",e)}}(()=>{const e=new c({name:"pageStore",entry:()=>new l(u)});d.add(e)})();const v=new c({name:"page",entry:(e,s)=>{const{pageStore:r,events:n}=e;function a(e){try{new Swiper("#team-select-slider",{observer:!0,resizeObserver:!0,slidesPerView:"auto",grabCursor:!0,centeredSlides:!0,breakpoints:{420:{centeredSlides:!1}}}),function(e,t){const s=document.querySelector("#teamates-slider-counter .teamates-slider__current"),r=document.querySelector("#teamates-slider-counter .teamates-slider__total"),n=new Swiper("#teamates-slider",{observer:!0,resizeObserver:!0,slidesPerView:"auto",centeredSlides:!0,grabCursor:!0,loop:!0,effect:"coverflow",coverflowEffect:{rotate:40,stretch:350,depth:300,modifier:.65,slideShadows:!1},autoplay:{delay:3e3},navigation:{prevEl:"#teamates-slider-prev",nextEl:"#teamates-slider-next"},breakpoints:{1024:{coverflowEffect:{rotate:40,stretch:500,depth:400,modifier:.65,slideShadows:!1}}},on:{slideChange:function(){const e=this.slides,t=this.activeIndex;e.forEach(((e,s)=>{const r=s-t;e.setAttribute("data-slide-position",r)}));const[s]=d(e);a(s)},afterInit:e=>{!function(e){e.wrapperEl.addEventListener("click",(t=>{let{target:s}=t;if(!s.classList.contains("teamate-card__btn")&&!s.closest(".teamate-card__btn"))return;const r=s.closest(".swiper-slide");e.slideTo(r.getAttribute("data-slide-idx"),300)}))}(e);const t=c(e);l(t),o(t);const[s]=d(t);a(s)},observerUpdate:e=>{const t=c(e);l(t),o(t),setTimeout((()=>{const[e]=d(t);a(e)}),300)},slideChangeTransitionStart:e=>{e.el.addEventListener("transitionend",(()=>{const t=c(e),[s,r]=d(t);!function(e,t,s){if(e.length<1||!t)return;t.setAttribute("data-slide-position",0);const r=Math.min(5,Math.ceil((e.length-1)/2)),n=Math.max(0,s-r),a=Math.min(e.length,s+r+1);e.slice(n,s).reverse().forEach(((e,t)=>{e.setAttribute("data-slide-position",-1-t)})),e.slice(s+1,a).forEach(((e,t)=>{e.setAttribute("data-slide-position",1+t)}))}(t,s,r),a(s)}))}}});function a(e){if(e){const r=Number(e.getAttribute("data-card-idx"));t=r+1,s.textContent=t,i(r)}var t}function i(t){e.update((e=>({...e,selectedEmployeeIdx:t})))}function o(e){r.textContent=e.length}function c(e){return[...e.wrapperEl.querySelectorAll(".swiper-slide")]}function d(e){const t=e.findIndex((e=>e.classList.contains("swiper-slide-active")));return[e[t],t]}function l(e){e.length<1||e.forEach(((e,t)=>e.setAttribute("data-slide-idx",t)))}t.on("slideToFirstEmployee",(()=>{n.slideTo(0,300),i(0)}))}(r,n),$("#teamates-list-wrapper").on("click",(e=>{let{target:t}=e;const s=$("header"),r=$("#profile");if(!t.classList.contains("teamate-card__btn")&&!t.closest(".teamate-card__btn"))return;const n=r.get(0).getBoundingClientRect(),a=s.outerHeight();window.scrollTo({top:window.scrollY+n.top-a,behavior:"smooth"})})),y("main-contact-form",r),y("cv-request-contact-form",r),function(e,t){const s=$("#profile-main"),r=$("#employee-profile-template").html(),n=$("#profile-skills-rates"),a=$("#employee-skills-rates-template").html(),i=$("#profile-tags-cloud"),o=$("#employee-tags-cloud-template").html();Mustache.parse(r),Mustache.parse(a),Mustache.parse(o),s.on("click",(e=>{let{target:t}=e;(t.classList.contains("profile__download-btn")||t.closest(".profile__download-btn"))&&drawers.open("cv-request-form",t)})),e.on("update",(e=>{let{state:t,prevState:s}=e;if(t.selectedEmployeeIdx===s.selectedEmployeeIdx&&t.employees===s.employees)return;const{status:r,data:c}=t.employees;if(0===c.length)return;const{selectedEmployeeIdx:d}=t,l=c[d];(function(e,t){const s=$("#employee-profile-template").html(),r=Mustache.render(s,t);$("#profile-main").html(r)})(0,{crb_cv_photo:l.crb_cv_photo,crb_person_name:l.crb_person_name,crb_person_title:l.crb_person_title,crb_exp:l.crb_exp,crb_areas_of_exp:l.crb_areas_of_exp}),function(e,t){const s=t.map((e=>{let{crb_name:t,crb_rate:s}=e;return{crb_name:t,crb_rate:new Array(s)}}));n.html(Mustache.render(a,s))}(0,l.crb_skills_list),function(e,t){let{crb_main_message:s,crb_tags_cloud:r}=t;const n=360/r.length,a={crb_main_message:s,crb_tags_cloud:r.map(((e,t)=>({...e,"placing-degree":t*n+(.1*-n+.2*n*Math.random())+"deg","distance-shift":""+(.1*Math.random()-.05)})))};console.log(a),i.html(Mustache.render(o,a))}(0,l)}))}(r),function(e,s){const r=$("#teamates-list-wrapper"),n=$("#employee-card-template").html();Mustache.parse(n),e.on("update",(e=>{let{state:t,prevState:s}=e;if(t.employees===s.employees)return;const{status:r,data:n}=t.employees;o(0,n)})),e.on("update",(e=>{let{state:s,prevState:r}=e;s.selectedDepartmentId!==r.selectedDepartmentId&&async function(e){const s=d.use("pageStore");s.update((e=>({...e,employees:{...e.employees,status:"loading"}})));const r=(await async function(e){d.use("pageStore");try{const t=await fetch(`${h}/employees?per_page=100&${e}`,{method:"GET"});return g(t),t.json()}catch(e){console.error("Error while fetcheeng employees")}}(`categories=${e}`)).sort(((e,s)=>{const r=e.crb_order,n=s.crb_order;return t(r)&&t(n)?Number(r)-Number(n):t(r)?-1:t(n)?1:0}));r.forEach(((e,t)=>e.__idx=t)),s.update((e=>({...e,employees:{...e.employees,status:"idle",data:r}})))}(s.selectedDepartmentId)}));const{status:a,data:i}=e.state.employees;function o(e,t){r.html(Mustache.render(n,t)),s.emit("slideToFirstEmployee")}o(0,i)}(r,n),async function(e,t){let s=null;const r=$("#department-select-wrapper");function n(t){if(s===t)return;s&&s.classList.remove("active");const r=t.getAttribute("data-id");e.update((e=>({...e,selectedDepartmentId:r}))),t.classList.add("active"),s=t}e.on("update",(e=>{let{state:t,prevState:s}=e;if(t.departments===s.departments)return;const{status:a,data:i}=t.departments;!function(e,t){r.html(function(e,t){return t.map((e=>`<div class="swiper-slide">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="text-link section-nav__btn" data-slug="${e.slug}" data-id="${e.id}">${e.html_representation}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>`)).join("")}(0,t))}(0,i);const o=r.find("[data-id]").first().get(0);o&&n(o)})),async function(){const e=d.use("pageStore"),t={"en-US":"en","pl-PL":"pl"},s=document.documentElement.getAttribute("lang");console.log(s),e.update((e=>({...e,departments:{...e.departments,status:"loading"}}))),console.log(t[s]);const r=await async function(e){d.use("pageStore"),console.log(`fetchCategory. slug: ${e}`);const t=`slug=${e}`;return(await b(t))[0]}(`employees-${t[s]}`);console.log(r);const n=await b(`parent=${r.id}`);e.update((e=>({...e,departments:{...e.departments,status:"idle",data:n}})))}(),r.on("click",(e=>{let{target:t}=e;t.hasAttribute("data-id")&&n(t)}))}(r)}catch(e){!function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s]}(e)}}r.on("update",(e=>{let{state:t,prevState:s}=e;return console.log(t,s)})),"interactive"===document.readyState?a():window.addEventListener("DOMContentLoaded",a)},required:["events","commonStore","pageStore"]});d.add(v)}()}();